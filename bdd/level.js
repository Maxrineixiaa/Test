const a8_0x3968e9=a8_0x3aa8;(function(_0x5f3e74,_0x52678a){const _0x1b89b7=a8_0x3aa8,_0x4431ac=_0x5f3e74();while(!![]){try{const _0x2cff39=parseInt(_0x1b89b7(0x12a))/0x1*(-parseInt(_0x1b89b7(0x130))/0x2)+-parseInt(_0x1b89b7(0x12e))/0x3+-parseInt(_0x1b89b7(0x136))/0x4+parseInt(_0x1b89b7(0x125))/0x5*(parseInt(_0x1b89b7(0x123))/0x6)+parseInt(_0x1b89b7(0x11e))/0x7*(-parseInt(_0x1b89b7(0x12b))/0x8)+-parseInt(_0x1b89b7(0x138))/0x9+-parseInt(_0x1b89b7(0x137))/0xa*(-parseInt(_0x1b89b7(0x13c))/0xb);if(_0x2cff39===_0x52678a)break;else _0x4431ac['push'](_0x4431ac['shift']());}catch(_0x417e7b){_0x4431ac['push'](_0x4431ac['shift']());}}}(a8_0x5377,0xbfc46),require(a8_0x3968e9(0x133))['config']());const {Pool}=require('pg'),s=require(a8_0x3968e9(0x12d)),dbUrl=s['DATABASE_URL']?s[a8_0x3968e9(0x128)]:a8_0x3968e9(0x121),proConfig={'connectionString':dbUrl,'ssl':{'rejectUnauthorized':![]}},pool=new Pool(proConfig);async function createUsersRankTable(){const _0x38b218=a8_0x3968e9,_0x4eea7c=await pool[_0x38b218(0x122)]();try{await _0x4eea7c['query']('\x0a\x20\x20\x20\x20\x20\x20CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20users_rank\x20(\x0a\x20\x20\x20\x20\x20\x20\x20\x20id\x20SERIAL\x20PRIMARY\x20KEY,\x0a\x20\x20\x20\x20\x20\x20\x20\x20jid\x20VARCHAR(255)\x20UNIQUE,\x0a\x20\x20\x20\x20\x20\x20\x20\x20xp\x20INTEGER\x20DEFAULT\x200,\x0a\x20\x20\x20\x20\x20\x20\x20\x20messages\x20INTEGER\x20DEFAULT\x200\x0a\x20\x20\x20\x20\x20\x20);\x0a\x20\x20\x20\x20');}catch(_0x468caf){console[_0x38b218(0x124)](_0x38b218(0x131),_0x468caf);}finally{_0x4eea7c['release']();}}async function ajouterOuMettreAJourUserData(_0x252127){const _0x442dac=a8_0x3968e9,_0x2d1ade=await pool[_0x442dac(0x122)]();try{const _0x3e7c6a=await _0x2d1ade[_0x442dac(0x132)](_0x442dac(0x126),[_0x252127]),_0x4ea473=_0x3e7c6a[_0x442dac(0x13b)][_0x442dac(0x134)]>0x0;_0x4ea473?await _0x2d1ade[_0x442dac(0x132)](_0x442dac(0x120),[_0x252127]):await _0x2d1ade[_0x442dac(0x132)](_0x442dac(0x13a),[_0x252127,0xa,0x1]);}catch(_0x30ea29){console[_0x442dac(0x124)](_0x442dac(0x11f),_0x30ea29);}finally{_0x2d1ade[_0x442dac(0x129)]();}};function a8_0x3aa8(_0x50b20c,_0x2b4b05){const _0x537732=a8_0x5377();return a8_0x3aa8=function(_0x3aa8ee,_0x3103b5){_0x3aa8ee=_0x3aa8ee-0x11e;let _0x487c1c=_0x537732[_0x3aa8ee];return _0x487c1c;},a8_0x3aa8(_0x50b20c,_0x2b4b05);}async function getMessagesAndXPByJID(_0x330f7c){const _0x8764f9=a8_0x3968e9,_0xe03ec6=await pool['connect']();try{const _0x148dd5=_0x8764f9(0x12f),_0x3bc2e7=await _0xe03ec6[_0x8764f9(0x132)](_0x148dd5,[_0x330f7c]);if(_0x3bc2e7[_0x8764f9(0x13b)][_0x8764f9(0x134)]>0x0){const {messages:_0x3e1c98,xp:_0x22ec0d}=_0x3bc2e7[_0x8764f9(0x13b)][0x0];return{'messages':_0x3e1c98,'xp':_0x22ec0d};}else return{'messages':0x0,'xp':0x0};}catch(_0x5ea05d){return console[_0x8764f9(0x124)](_0x8764f9(0x139),_0x5ea05d),{'messages':0x0,'xp':0x0};}finally{_0xe03ec6['release']();}}async function getBottom10Users(){const _0x4307f2=a8_0x3968e9,_0x1544ff=await pool['connect']();try{const _0xdff26f=_0x4307f2(0x12c),_0x5796c0=await _0x1544ff[_0x4307f2(0x132)](_0xdff26f);return _0x5796c0[_0x4307f2(0x13b)];}catch(_0xb3b59e){return console['error'](_0x4307f2(0x135),_0xb3b59e),[];}finally{_0x1544ff[_0x4307f2(0x129)]();}}function a8_0x5377(){const _0x402c17=['Erreur\x20lors\x20de\x20la\x20récupération\x20des\x20données\x20de\x20l\x27utilisateur:','INSERT\x20INTO\x20users_rank\x20(jid,\x20xp,\x20messages)\x20VALUES\x20($1,\x20$2,\x20$3)','rows','803FaNThS','485807rGGKEW','Erreur\x20lors\x20de\x20la\x20mise\x20à\x20jour\x20des\x20données\x20de\x20l\x27utilisateur:','UPDATE\x20users_rank\x20SET\x20xp\x20=\x20xp\x20+\x2010,\x20messages\x20=\x20messages\x20+\x201\x20WHERE\x20jid\x20=\x20$1','postgres://db_7xp9_user:6hwmTN7rGPNsjlBEHyX49CXwrG7cDeYi@dpg-cj7ldu5jeehc73b2p7g0-a.oregon-postgres.render.com/db_7xp9','connect','7566OWkSPO','error','2155eHKAoh','SELECT\x20*\x20FROM\x20users_rank\x20WHERE\x20jid\x20=\x20$1','exports','DATABASE_URL','release','29863xhUISF','80QOjRED','SELECT\x20jid,\x20xp\x20,\x20messages\x20FROM\x20users_rank\x20ORDER\x20BY\x20xp\x20DESC\x20LIMIT\x2010','../set','2239509esBUvz','SELECT\x20messages,\x20xp\x20FROM\x20users_rank\x20WHERE\x20jid\x20=\x20$1','10nFOcTG','Erreur\x20lors\x20de\x20la\x20création\x20de\x20la\x20table\x20users_rank:','query','dotenv','length','Erreur\x20lors\x20de\x20la\x20récupération\x20du\x20bottom\x2010\x20des\x20utilisateurs:','3177364prsTBu','405830soyzfe','3027627pALlly'];a8_0x5377=function(){return _0x402c17;};return a8_0x5377();}createUsersRankTable(),module[a8_0x3968e9(0x127)]={'ajouterOuMettreAJourUserData':ajouterOuMettreAJourUserData,'getMessagesAndXPByJID':getMessagesAndXPByJID,'getBottom10Users':getBottom10Users};